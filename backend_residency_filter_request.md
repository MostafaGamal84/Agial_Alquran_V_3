# طلب دعم فلتر فئة الإقامة

مرحبًا فريق الباك-إند،

قمنا بإضافة خيار جديد في واجهة الإدارة يسمح بتصفية بيانات الطلاب حسب فئة الإقامة (مصريون، عرب، أجانب). لكي تعمل الواجهة بالشكل الصحيح نحتاج لدعم برمجي في مجموعة من نقاط النهاية كما هو موضح أدناه.

## ملخص التغييرات المطلوبة
- إضافة معامل استعلام اختياري باسم `residentGroup` يحمل إحدى القيم الثلاثة التالية: `egyptian`, `arab`, `foreign`.
- عند غياب المعامل أو إرسال القيمة `all` لا يتم تطبيق أي قيد إضافي.
- يتم تحديد الفئة استنادًا إلى **مكان الإقامة** (حقل `ResidentId`) وليس الجنسية فقط:
  - `egyptian`: السجلات التي يكون فيها مكان الإقامة مصر.
  - `arab`: أماكن الإقامة التابعة لدول عربية أخرى (خليج، شام، شمال أفريقيا، ...).
  - `foreign`: أي إقامة لا تندرج تحت الصنفين السابقين.
- يفضَّل الاعتماد على جدول الجنسيات/الدول الموجود مسبقًا لضمان التطابق بين حقل `ResidentId` والقيم الفعلية.

## نقاط النهاية المستهدفة
1. `GET /api/UsersForGroups/GetUsersForSelects`
2. `GET /api/StudentSubscrib/GetStudents`
3. `GET /api/StudentSubscrib/GetStudentSubscribesWithPayment`
4. `GET /api/CircleReport/GetResultsByFilter`
5. `GET /api/StudentPayment/Invoices`

> **ملاحظة:** أرسلنا المعامل الجديد من الواجهة الأمامية لكل النداءات السابقة عند اختيار المستخدم لفئة الإقامة، لذلك نتوقع أن تعود البيانات مفلترة بالفعل من الخادم حتى تعمل الترقيمات (pagination) بشكل صحيح.

## تفاصيل التنفيذ المقترحة
- قراءة قيمة `residentGroup` من الاستعلام وتحويلها إلى مجموعة من قيم `ResidentId`، أو بناء شرط ديناميكي في الاستعلام قبل التنفيذ.
- تأكدوا من تطبيق الشرط في جميع الاستعلامات الفرعية (مثلاً عند احتساب `totalCount`).
- يُفضّل إضافة توثيق للمعامل الجديد في Swagger لتسهيل المراجعة لاحقًا.

في حال الحاجة لأي معلومات إضافية عن كيفية استهلاك البيانات في الواجهة يسعدني المساعدة. شكرًا لكم.
