<div class="table-responsive">
  <div class="table-search p-t-20 p-x-20">
    <mat-form-field appearance="outline" class="w-100">
      <input
        matInput
        (keyup)="applyFilter($event)"
        placeholder="Search...."
        [value]="searchTerm"
        #input
      />
    </mat-form-field>
  </div>

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
    <!-- id Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">INVOICE ID</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap text-center">{{ element.id }}</td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>STUDENT</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">
        {{ element.name }}
      </td>
    </ng-container>

    <!-- create_date Column -->
    <ng-container matColumnDef="create_date">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>CREATE DATE</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">{{ element.create_date }}</td>
    </ng-container>

    <!-- due_date Column -->
    <ng-container matColumnDef="due_date">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>DUE DATE</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">{{ element.due_date }}</td>
    </ng-container>

    <!-- qty Column -->
    <ng-container matColumnDef="qty">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>QUANTITY</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">{{ element.qty }}</td>
    </ng-container>

    <!-- status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>STATUS</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">
        @if (element.status === 'paid') {
          <span class="user-status bg-success-500 text-white">Paid</span>
        } @else if (element.status === 'unpaid') {
          <span class="user-status bg-cyan-500 text-white">Unpaid</span>
        } @else if (element.status === 'overdue') {
          <span class="user-status bg-warn-500 text-white">Overdue</span>
        } @else if (element.status === 'cancelled') {
          <span class="user-status bg-warn-500 text-white">Cancelled</span>
        }
      </td>
    </ng-container>

    <!-- action Column -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>Action</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">
        <ul class="list-inline m-b-0">
          <li class="list-inline-item">
            <a
              href="javascript:"
              class="avatar avatar-xs bg-accent-100 hover m-r-10"
              matTooltip="View"
              (click)="openPaymentDetails(element.id)"
            >
              <i class="f-20 ti ti-eye text-accent-500"></i>
            </a>
          </li>
          @if (element.status === 'unpaid') {
            <li class="list-inline-item">
              <a
                href="javascript:"
                class="avatar avatar-xs bg-primary-50 hover m-r-10"
                matTooltip="Edit"
                (click)="openPaymentEdit(element.id)"
              >
                <i class="f-20 ti ti-edit text-primary-500"></i>
              </a>
            </li>
          }
          <!-- <li class="list-inline-item">
            <a href="javascript:" matTooltip="Delete" class="avatar avatar-xs bg-warn-50 hover">
              <i class="f-20 ti ti-trash text-warn-500"></i>
            </a>
          </li> -->
        </ul>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
</div>
