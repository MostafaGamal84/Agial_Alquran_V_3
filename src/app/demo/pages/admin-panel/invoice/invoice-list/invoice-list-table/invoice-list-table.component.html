<div class="table-responsive">
  <div class="table-search p-t-20 p-x-20">
    <mat-form-field appearance="outline" class="w-100">
      <input
        matInput
        (keyup)="applyFilter($event)"
        [placeholder]="'Search...' | translate"
        [value]="searchTerm"
        #input
      />
    </mat-form-field>
  </div>

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
    <!-- id Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">{{ 'Invoice ID' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap text-center">{{ element.id }}</td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Student' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">
        {{ element.name }}
      </td>
    </ng-container>

    <!-- create_date Column -->
    <ng-container matColumnDef="create_date">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Create Date' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">{{ element.create_date  | date:'dd/MM/yyyy' }}</td>
    </ng-container>

    <!-- due_date Column -->
    <ng-container matColumnDef="due_date">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Due Date' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">{{ element.due_date  | date:'dd/MM/yyyy' }}</td>
    </ng-container>

    <!-- qty Column -->
    <ng-container matColumnDef="qty">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'المبلغ' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">{{ element.qty }}</td>
    </ng-container>

    <!-- status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'Status' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">
        @if (element.status === 'paid') {
          <span class="user-status bg-success-500 text-white">{{ 'Paid' | translate }}</span>
        } @else if (element.status === 'unpaid') {
          <span class="user-status bg-cyan-500 text-white">{{ 'Unpaid' | translate }}</span>
        } @else if (element.status === 'overdue') {
          <span class="user-status bg-warn-500 text-white">{{ 'Overdue' | translate }}</span>
        } @else if (element.status === 'cancelled') {
          <span class="user-status bg-warn-500 text-white">{{ 'Cancelled' | translate }}</span>
        }
      </td>
    </ng-container>

    <!-- action Column -->
    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>{{ 'Actions' | translate }}</th>
      <td mat-cell *matCellDef="let element" class="text-nowrap">
        <ul class="list-inline m-b-0">
          <li class="list-inline-item">
            <a
              href="javascript:"
              class="avatar avatar-xs bg-accent-100 hover m-r-10"
              [matTooltip]="'عرض' | translate"
              (click)="openPaymentDetails(element.id)"
            >
              <i class="f-20 ti ti-eye text-accent-500"></i>
            </a>
          </li>
          <li class="list-inline-item">
            <a
              href="javascript:"
              class="avatar avatar-xs bg-primary-50 hover m-r-10"
              [matTooltip]="'تعديل' | translate"
              (click)="openPaymentEdit(element.id)"
            >
              <i class="f-20 ti ti-edit text-primary-500"></i>
            </a>
          </li>
          <!-- <li class="list-inline-item">
            <a href="javascript:" matTooltip="Delete" class="avatar avatar-xs bg-warn-50 hover">
              <i class="f-20 ti ti-trash text-warn-500"></i>
            </a>
          </li> -->
        </ul>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <div class="app-paginator" #loadMoreTrigger>
    <span class="text-muted" *ngIf="isLoadingMore">
      {{ 'Loading more...' | translate }}
    </span>
    <span class="text-muted" *ngIf="!isLoadingMore && !hasMoreResults()">
      {{ 'تم تحميل كل البيانات' | translate }}
    </span>
    <span class="text-muted invisible" *ngIf="!isLoadingMore && hasMoreResults()">&nbsp;</span>
  </div>
</div>
