<form class="row" [formGroup]="reportForm" (ngSubmit)="onSubmit()">

  <div class="col-md-6">
    <app-smart-select
      label="المشرف"
      [items]="managers"
      labelKey="name"
      valueKey="id"
      [value]="reportForm.get('managerId')?.value"
      (valueChange)="onManagerChanged($event)"
      [disabled]="lockManagerSelection"
      [loading]="isLoadingManagers">
    </app-smart-select>
  </div>

  <div class="col-md-6">
    <app-smart-select
      label="المعلم"
      [items]="teachers"
      labelKey="name"
      valueKey="id"
      [value]="reportForm.get('teacherId')?.value"
      (valueChange)="onTeacherChanged($event)"
      [disabled]="lockTeacherSelection"
      [loading]="isLoadingTeachers">
    </app-smart-select>
  </div>

  <div class="col-md-6">
    <app-smart-select
      label="طالب"
      [items]="students"
      labelKey="name"
      valueKey="id"
      [value]="reportForm.get('studentId')?.value"
      (valueChange)="reportForm.patchValue({ studentId: $event }, { emitEvent:false })"
      [loading]="isLoadingStudents">
    </app-smart-select>
  </div>

  <div class="col-md-6">
    <app-smart-select
      label="حالة الحضور"
      [items]="attendStatusOptions"
      labelKey="label"
      valueKey="value"
      [value]="reportForm.get('attendStatueId')?.value"
      (valueChange)="onStatusChanged($event)">
    </app-smart-select>
  </div>

  <div class="col-md-6" *ngIf="reportForm.get('attendStatueId')?.value === 3">
    <input class="form-control" type="number" formControlName="minutes" placeholder="الدقائق" />
  </div>

  <!-- باقي حقول التقرير -->
  <div class="col-md-6">
    <app-smart-select
      label="السورة الجديدة"
      [items]="surahList"
      labelKey="name"
      valueKey="id"
      [value]="reportForm.get('newId')?.value"
      (valueChange)="reportForm.patchValue({ newId: $event }, { emitEvent:false })">
    </app-smart-select>
  </div>

  <div class="col-12">
    <textarea class="form-control" formControlName="other" placeholder="ملاحظات أخرى"></textarea>
  </div>

  <div class="col-12 mt-3">
    <button class="btn btn-primary" type="submit" [disabled]="isSubmitting">
      إنشاء التقرير
    </button>
  </div>

</form>
