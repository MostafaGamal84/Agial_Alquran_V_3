<div class="row p-t-25">
  <div class="col-12">
    <app-card [cardTitle]="'تفاصيل التقرير' | translate" cardClass="sm-block">
      <ng-template #headerOptionsTemplate>
        <div class="header-actions" *ngIf="canEdit && report?.id">
          <button mat-stroked-button color="primary" (click)="editReport()">
            <div class="flex align-item-center">
              <i class="ti ti-edit f-18 m-r-5"></i>
              {{ 'تعديل التقرير' | translate }}
            </div>
          </button>
        </div>
      </ng-template>

      <ng-container *ngIf="!isLoading; else loadingTemplate">
        <ng-container *ngIf="report; else emptyState">
          <div class="details-grid">
            <section class="details-section">
              <h6>{{ 'عرض ' | translate }}</h6>
              <div class="detail-item">
                <span class="label">{{ 'Circle' | translate }}</span>
                <span class="value">{{ getCircleName() }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Student' | translate }}</span>
                <span class="value">{{ getStudentName() }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Teacher' | translate }}</span>
                <span class="value">{{ getTeacherName() }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Attendance' | translate }}</span>
                <span class="value">{{ getStatusLabel(report?.attendStatueId) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Minutes' | translate }}</span>
                <span class="value">{{ displayValue(report?.minutes) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Created On' | translate }}</span>
                <span class="value">{{ formatDate(report?.creationTime) }}</span>
              </div>
            </section>

            <section class="details-section">
              <h6>{{ 'New Lesson' | translate }}</h6>
              <div class="detail-item">
                <span class="label">{{ 'Surah' | translate }}</span>
                <span class="value">{{ displayValue(report?.newId) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'From' | translate }}</span>
                <span class="value">{{ displayValue(report?.newFrom) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'To' | translate }}</span>
                <span class="value">{{ displayValue(report?.newTo) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Rate' | translate }}</span>
                <span class="value">{{ displayValue(report?.newRate) }}</span>
              </div>
            </section>

            <section class="details-section">
              <h6>{{ 'Recent Reviews' | translate }}</h6>
              <div class="detail-item">
                <span class="label">{{ 'Recent Past' | translate }}</span>
                <span class="value">{{ displayValue(report?.recentPast) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Recent Past Rate' | translate }}</span>
                <span class="value">{{ displayValue(report?.recentPastRate) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Distant Past' | translate }}</span>
                <span class="value">{{ displayValue(report?.distantPast) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Distant Past Rate' | translate }}</span>
                <span class="value">{{ displayValue(report?.distantPastRate) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Farthest Past' | translate }}</span>
                <span class="value">{{ displayValue(report?.farthestPast) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Farthest Past Rate' | translate }}</span>
                <span class="value">{{ displayValue(report?.farthestPastRate) }}</span>
              </div>
            </section>

            <section class="details-section">
              <h6>{{ 'Additional Notes' | translate }}</h6>
              <div class="detail-item">
                <span class="label">{{ 'كلمات غريب القرآن' | translate }}</span>
                <span class="value">{{ displayValue(report?.theWordsQuranStranger) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Intonation' | translate }}</span>
                <span class="value">{{ displayValue(report?.intonation) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">{{ 'Other Notes' | translate }}</span>
                <span class="value">{{ displayValue(report?.other) }}</span>
              </div>
            </section>
          </div>
        </ng-container>
      </ng-container>

      <ng-template #loadingTemplate>
        <div class="loading-container">
          <mat-progress-spinner diameter="48" mode="indeterminate"></mat-progress-spinner>
        </div>
      </ng-template>

      <ng-template #emptyState>
        <div class="empty-state">
          <i class="ti ti-notebook f-32 m-b-10"></i>
          <p>{{ 'No report details available.' | translate }}</p>
        </div>
      </ng-template>
    </app-card>
  </div>
</div>
