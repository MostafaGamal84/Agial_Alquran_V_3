<app-card [showHeader]="false">
  <div class="flex align-item-center justify-content-between m-b-15">
    <div class="f-w-600 f-16">Subscriber Type Overview</div>
    <a [matMenuTriggerFor]="paymentInfo" class="avatar avatar-s hover"><i class="ti ti-dots-vertical f-18"></i></a>
    <mat-menu #paymentInfo="matMenu">
      <a href="javascript:" mat-menu-item>Name</a>
      <a href="javascript:" mat-menu-item>Date</a>
      <a href="javascript:" mat-menu-item>Rating</a>
      <a href="javascript:" mat-menu-item>Unread</a>
    </mat-menu>
  </div>
  <div class="product-overview" id="chart">
    <apx-chart
      [series]="chartOptions.series"
      [chart]="chartOptions.chart"
      [labels]="chartOptions.labels"
      [legend]="chartOptions.legend"
      [fill]="chartOptions.fill"
      [responsive]="chartOptions.responsive"
      [colors]="chartOptions.colors"
    />
  </div>
  <div class="row text-center m-t-20">
    <div class="col-6 col-lg-4 col-xxl-4">
      <div class="overview-product-legends">
        <p class="m-b-5">
          <span>Total Subscribers</span>
        </p>
        <div class="f-w-600">{{ totalSubscribers | number: '1.0-0' }}</div>
      </div>
    </div>
    <div class="col-6 col-lg-4 col-xxl-4">
      <div class="overview-product-legends">
        <p class="m-b-5">
          <span>Unique Subscribers</span>
        </p>
        <div class="f-w-600">{{ uniqueSubscribers | number: '1.0-0' }}</div>
      </div>
    </div>
    <div class="col-6 col-lg-4 col-xxl-4">
      <div class="overview-product-legends">
        <p class="m-b-5">
          <span>Subscription Types</span>
        </p>
        <div class="f-w-600">{{ totalSubscriptionTypes | number: '1.0-0' }}</div>
      </div>
    </div>
  </div>
  <div class="row text-center">
    @if (breakdown.length > 0) {
      @for (
        item of breakdown;
        track item.subscribeTypeId ?? item.typeName ?? $index;
        let idx = $index
      ) {
        <div class="col-6 col-lg-4 col-xxl-4">
          <div class="overview-product-legends" [ngStyle]="{ '--legend-color': getSliceColor(idx) }">
            <p class="m-b-5">
              <span>{{ item.typeName ?? 'Unknown' }}</span>
            </p>
            <div class="f-w-600">{{ (item.subscriberCount ?? 0) | number: '1.0-0' }}</div>
            <div class="text-muted f-12">{{ (item.percentage ?? 0) | number: '1.0-2' }}%</div>
          </div>
        </div>
      }
    } @else {
      <div class="col-12">
        <div class="overview-product-legends">
          <p class="m-b-5">
            <span>No subscriber data available</span>
          </p>
        </div>
      </div>
    }
  </div>
  <div class="row text-center m-t-25">
    <div class="col-sm-6 m-t-10">
      <div class="grid">
        <button mat-stroked-button class="b-rad-20">View All</button>
      </div>
    </div>
    <div class="col-sm-6 m-t-10">
      <div class="grid">
        <button mat-flat-button class="b-rad-20" color="primary">Create New Page</button>
      </div>
    </div>
  </div>
</app-card>
