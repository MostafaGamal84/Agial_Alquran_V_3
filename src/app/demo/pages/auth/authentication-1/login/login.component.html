<app-loading-overlay [isLoading]="loading" [showHadith]="true">
  <main class="auth-main" id="main-content" role="main">
    <div class="auth-wrapper version-1">
      <section class="auth-form ramadan-theme">
        <app-card [showHeader]="false" class="auth-form-card" padding="40">
          <div class="ramadan-decoration" aria-hidden="true">
            <span class="moon"></span>
            <span class="star star-1"></span>
            <span class="star star-2"></span>
            <span class="star star-3"></span>
            <span class="star star-4"></span>
            <span class="star star-5"></span>
            <span class="glow-orb glow-orb-1"></span>
            <span class="glow-orb glow-orb-2"></span>
            <span class="lantern lantern-left"></span>
            <span class="lantern lantern-middle"></span>
            <span class="lantern lantern-right"></span>
            <span class="mosque-silhouette">
              <span class="minaret minaret-left"></span>
              <span class="dome"></span>
              <span class="minaret minaret-right"></span>
            </span>
          </div>



          <section class="screen-reader-mode-toggle" aria-label="Screen reader preferences">
            <button
              type="button"
              class="screen-reader-toggle-btn"
              (click)="toggleScreenReaderMode()"
              role="switch"
              [attr.aria-checked]="screenReaderModeEnabled"
              [attr.aria-label]="'ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙƒÙÙˆÙÙŠÙ† / Screen Reader Mode: ' + (screenReaderModeEnabled ? 'On' : 'Off')"
            >
              <span>ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙƒÙÙˆÙÙŠÙ† / Screen Reader Mode</span>
              <strong>{{ screenReaderModeEnabled ? 'ON' : 'OFF' }}</strong>
            </button>
          </section>

          <header class="text-center">
            <a [routerLink]="['/']" aria-label="Application home">
              <img src="assets/images/logo-dark.svg" class="app-logo" alt="Agial Alquran application logo" />
            </a>
            <p class="ramadan-greeting">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… âœ¨  ğŸŒ™</p>
          </header>

          <div class="sr-only" role="alert" aria-live="assertive" aria-atomic="true">{{ formErrorSummary }}</div>

          <form
            [formGroup]="loginForm"
            (ngSubmit)="onSubmit()"
            class="text-start"
            role="form"
            novalidate
          >
            <h1 class="login-page-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Login</h1>

            <mat-form-field appearance="outline" class="w-100 m-t-5">
              <mat-label>{{ 'AUTH.LOGIN.UsernameLabel' | translate }}</mat-label>
              <input
                id="email"
                type="email"
                matInput
                formControlName="email"
                autocomplete="username"
                [attr.aria-invalid]="emailHasError"
                [attr.aria-describedby]="emailHasError ? 'email-error' : null"
                [ngClass]="{ 'is-invalid': emailHasError }"
                aria-label="Email address"
              />
              @if (emailHasError) {
                <mat-hint id="email-error" class="text-warn-500" role="alert">
                  {{ 'AUTH.COMMON.Validation.EmailRequired' | translate }}
                </mat-hint>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-100 m-t-5">
              <mat-label>{{ 'AUTH.LOGIN.PasswordLabel' | translate }}</mat-label>
              <input
                [type]="hide ? 'password' : 'text'"
                id="password"
                matInput
                formControlName="password"
                autocomplete="current-password"
                [attr.aria-invalid]="passwordHasError"
                [attr.aria-describedby]="passwordHasError ? 'password-error' : null"
                [ngClass]="{ 'is-invalid': passwordHasError }"
                aria-label="Password"
              />
              @if (passwordHasError) {
                <mat-hint id="password-error" class="text-warn-500" role="alert">
                  {{ 'AUTH.COMMON.Validation.PasswordRequired' | translate }}
                </mat-hint>
              }
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="hide = !hide"
                [attr.aria-label]="hide ? 'Show password characters' : 'Hide password characters'"
                [attr.aria-pressed]="!hide"
              >
                <mat-icon aria-hidden="true">{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
            </mat-form-field>

            <nav class="check-me" aria-label="Login secondary actions">
              <mat-checkbox class="float-start" color="primary" aria-label="Remember my login">
                {{ 'AUTH.LOGIN.RememberMe' | translate }}
              </mat-checkbox>
              <a class="f-w-400 text-primary-500 m-b-0" [routerLink]="['/forgot-password']" aria-label="Forgot password">
                {{ 'AUTH.LOGIN.ForgotPassword' | translate }}
              </a>
            </nav>

            <div class="grid">
              <button mat-flat-button color="primary" class="b-rad-20 m-t-15" type="submit" aria-label="Submit login form">
                {{ 'AUTH.LOGIN.Submit' | translate }}
              </button>
            </div>
          </form>

          <div class="check-me m-t-20" role="contentinfo" aria-label="Registration options">
            <div class="text-muted">{{ 'AUTH.LOGIN.NoAccount' | translate }}</div>
            <a [routerLink]="['/register']" class="text-primary-500" aria-label="Create a new account">
              {{ 'AUTH.LOGIN.CreateAccount' | translate }}
            </a>
          </div>
        </app-card>
      </section>
    </div>
  </main>
</app-loading-overlay>
