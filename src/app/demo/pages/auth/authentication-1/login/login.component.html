<app-loading-overlay [isLoading]="loading" [showHadith]="true">
  <section class="auth-main" [attr.dir]="dir" aria-labelledby="login-title" data-main-heading="true">
    <div class="auth-wrapper version-1">
      <section class="auth-form ramadan-theme">
        <app-card [showHeader]="false" class="auth-form-card" padding="40">
          <div class="ramadan-decoration" aria-hidden="true">
            <span class="moon"></span>
            <span class="star star-1"></span>
            <span class="star star-2"></span>
            <span class="star star-3"></span>
            <span class="star star-4"></span>
            <span class="star star-5"></span>
            <span class="glow-orb glow-orb-1"></span>
            <span class="glow-orb glow-orb-2"></span>
            <span class="lantern lantern-left"></span>
            <span class="lantern lantern-middle"></span>
            <span class="lantern lantern-right"></span>
            <span class="mosque-silhouette">
              <span class="minaret minaret-left"></span>
              <span class="dome"></span>
              <span class="minaret minaret-right"></span>
            </span>
          </div>

          <header class="text-center">
            <a routerLink="/" aria-label="Application home">
              <img src="assets/images/logo-dark.svg" class="app-logo" alt="Agial Alquran application logo" />
            </a>
            <h1 id="login-title" class="sr-only">Login / ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
            <p class="ramadan-greeting">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… âœ¨ ğŸŒ™</p>
          </header>

          <div class="sr-mode-toggle-row">
            <button
              type="button"
              class="sr-mode-toggle"
              [attr.aria-pressed]="screenReaderModeEnabled"
              (click)="toggleScreenReaderMode()"
            >
              ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙƒÙÙˆÙÙŠÙ† / Screen Reader Mode:
              <span>{{ screenReaderModeEnabled ? 'On' : 'Off' }}</span>
            </button>
          </div>

          @if (errorSummary) {
            <div class="error-summary" role="alert" aria-live="assertive">{{ errorSummary }}</div>
          }

          <form
            #loginFormElement
            [formGroup]="loginForm"
            (ngSubmit)="onSubmit()"
            class="login-form"
            role="form"
            novalidate
          >
            <mat-form-field appearance="outline" class="w-100 m-t-5 ramadan-field">
              <mat-label>{{ 'AUTH.LOGIN.UsernameLabel' | translate }}</mat-label>

              <input
                id="email"
                type="email"
                matInput
                formControlName="email"
                autocomplete="username"
                [attr.aria-invalid]="emailHasError"
                [attr.aria-describedby]="emailHasError ? 'email-error' : null"
                aria-label="Email address"
              />

              @if (emailHasError) {
                <mat-error id="email-error" role="alert">
                  {{ 'AUTH.COMMON.Validation.EmailRequired' | translate }}
                </mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-100 m-t-5 ramadan-field">
              <mat-label>{{ 'AUTH.LOGIN.PasswordLabel' | translate }}</mat-label>

              <input
                [type]="hide ? 'password' : 'text'"
                id="password"
                matInput
                formControlName="password"
                autocomplete="current-password"
                [attr.aria-invalid]="passwordHasError"
                [attr.aria-describedby]="passwordHasError ? 'password-error' : null"
                aria-label="Password"
              />

              <button
                mat-icon-button
                matSuffix
                type="button"
                class="eye-btn"
                (click)="hide = !hide"
                [attr.aria-label]="hide ? 'Show password characters' : 'Hide password characters'"
                [attr.aria-pressed]="!hide"
              >
                <mat-icon aria-hidden="true">
                  {{ hide ? 'visibility_off' : 'visibility' }}
                </mat-icon>
              </button>

              @if (passwordHasError) {
                <mat-error id="password-error" role="alert">
                  {{ 'AUTH.COMMON.Validation.PasswordRequired' | translate }}
                </mat-error>
              }
            </mat-form-field>

            <div class="secondary-actions" aria-label="Login secondary actions">
              <mat-checkbox class="remember" color="primary" aria-label="Remember my login">
                {{ 'AUTH.LOGIN.RememberMe' | translate }}
              </mat-checkbox>

              <a class="forgot" [routerLink]="['/forgot-password']" aria-label="Forgot password">
                {{ 'AUTH.LOGIN.ForgotPassword' | translate }}
              </a>
            </div>

            <button mat-flat-button color="primary" class="submit-btn" type="submit" aria-label="Submit login form">
              {{ 'AUTH.LOGIN.Submit' | translate }}
            </button>
          </form>

          <div class="register-row" aria-label="Registration options">
            <div class="text-muted">{{ 'AUTH.LOGIN.NoAccount' | translate }}</div>
            <a [routerLink]="['/register']" class="register-link" aria-label="Create a new account">
              {{ 'AUTH.LOGIN.CreateAccount' | translate }}
            </a>
          </div>
        </app-card>
      </section>
    </div>
  </section>
</app-loading-overlay>
